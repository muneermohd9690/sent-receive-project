<!doctype html>
{% load static %}
<html lang="en">
<head>
    {% block title %}
    <title>IT Inventory Management</title>
    {% endblock %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!---- Bootstrap 5 --->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <!---- Bootstrap 5 --->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" ></script>


    <!---- Bootstrap js --->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!---- Bootstrap js --->

    <!---- LiveSearch js --->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!---- LiveSearch js --->



     <!---- Datatable new for excel and pdf import--->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/jq-3.6.0/jszip-2.5.0/dt-1.13.1/b-2.3.3/b-html5-2.3.3/b-print-2.3.3/datatables.min.css"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs5/jq-3.6.0/jszip-2.5.0/dt-1.13.1/b-2.3.3/b-html5-2.3.3/b-print-2.3.3/datatables.min.js"></script>
    <!---- Datatable new for excel and pdf import--->

<!--    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>-->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

    <!---- select picker and search --->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <!---- select picker and search --->

    <!---- Plotly--->
     <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!---- Plotly--->



    <!---- DatePicker--->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <!---- DatePicker--->



    <!---- Font-awesome --->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!---- Font-awesome --->

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    {% load static %}<link href="{% static 'images/favicon.ico' %}" rel="shortcut icon">
    {% load static %}<link href="{% static 'images/logo.ico' %}" rel="shortcut icon">
    {% load static %}<script src="{% static 'js/script.js' %}"></script>
    {% load static %}<script src="{% static 'js/script1.js' %}"></script>
    {% load static %}<link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript">
        var user='{{request.user}}'
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
             return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');

        function getCookie(name)
        {
            var cookieArr=document.cookie.split(";");
            for(var i =0;i<cookieArr.length;i++)
             {
                var cookiePair=cookieArr[i].split("=");
                if(name==cookiePair[0].trim())
                 {
                    return decodeURIComponent(cookiePair[1]);
                 }
             }
            return null;
         }
         var cart=JSON.parse(getCookie('cart'))
         if(cart==undefined){
            cart={}
            console.log('Cart was created!')
            document.cookie='cart=' + JSON.stringify(cart) + ";domain=;path=/"
         }

         console.log('Cart',cart)
    </script>

</head>


<div class="container-fluid p-3 my-3 bg-dark text-white">
    {% block navbar-content %}
    <h1><i class="fas fa-boxes"></i>&nbsp;&nbsp;<a href="{% url 'mainpage' %}" class="text-light">IT Inventory Management</a></h1>
    <div class="btn-group">
        <button type="button" class="btn btn-secondary">Prosecutions</button>
        <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
        </button>
        <div class="dropdown-menu">
            <a class="dropdown-item" href="{% url 'view_prosecutions' %}">View Prosecutions</a>
            <a class="dropdown-item" href="{% url 'add_prosecutions' %}">Add Prosecutions</a>
        </div>
    </div>
    <div class="btn-group">
        <button type="button" class="btn btn-secondary">Items</button>
        <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
        </button>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <li><a class="dropdown-item" href="{% url 'view_items' %}">View Items</a></li>
                    <li class="dropdown-submenu dropend"><a class="dropdown-item dropdown-toggle" href="#">Add</a>
                        <ul class="dropdown-menu submenu">
                            <li><a class="dropdown-item" href="{% url 'add_items' %}">Add Items</a></li>
                            <li><a class="dropdown-item" href="{% url 'add_items_details' %}">Add Items Details</a></li>
                        </ul>
                    </li>
                    <li class="dropdown-submenu dropend"><a class="dropdown-item dropdown-toggle" href="#">Edit</a>
                        <ul class="dropdown-menu submenu">
                            <li><a class="dropdown-item" href="{% url 'edit_items' %}">Edit Items</a></li>
                            <li><a class="dropdown-item" href="{% url 'edit_item_details' %}">Edit Item Details</a></li>
                        </ul>
                    </li>
                </ul>
     </div>

    <div class="btn-group">
        <button type="button" class="btn btn-secondary">Toners</button>
        <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
        </button>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="{% url 'view_toners' %}">View Toners</a></li>
                        <li class="dropdown-submenu dropend"><a class="dropdown-item dropdown-toggle" href="#">Add</a>
                            <ul class="dropdown-menu submenu">
                                <li><a class="dropdown-item" href="{% url 'add_toners' %}">Add Toners</a></li>
                                <li><a class="dropdown-item" href="{% url 'add_tonerdetails' %}">Add Toner Details</a></li>
                            </ul>
                        </li>
                        <li class="dropdown-submenu dropend"><a class="dropdown-item dropdown-toggle" href="#">Edit</a>
                            <ul class="dropdown-menu submenu">
                                <li><a class="dropdown-item" href="{% url 'edit_toners' %}">Edit Toners</a></li>
                                <li><a class="dropdown-item" href="{% url 'edit_tonerdetails' %}">Edit Toner Details</a></li>
                            </ul>
                        </li>
                  </ul>

    </div>
    <div class="btn-group">

    </div >
    <div class="btn-group">
        <button type="button" class="btn btn-secondary">Report</button>
        <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
        </button>
        <div class="dropdown-menu">
            <a class="dropdown-item" href="{% url 'view_yearly_toner_estimate' %}">Yearly Toner Report</a>
        </div>
    </div>
        <div class="btn-group">
        <button type="button" class="btn btn-secondary">Sent Items</button>
        <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">
        </button>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="{% url 'view_sent_items' %}">View Sent Items</a></li>
                        <li><a class="dropdown-item" href="{% url 'view_cart_items' %}">View Dispatch Items</a></li>
        </ul>
    </div>

    <div id="dispatch-icon">
        {% if total > 0 %}
        <a href="{% url 'view_cart_items' %}">
            <i class="fas fa-box" data-count={{total}} data-bs-toggle="tooltip" data-bs-placement="bottom" title="Dispatch Items" ></i>
        </a>
        {% else %}
        <a href="{% url 'view_cart_items' %}">
            <i class="fas fa-box" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Dispatch Items" ></i>
        </a>
        {% endif %}
    </div>


    <a href="{% url 'logout' %}" class=" btn btn-outline-danger " id="btn-logout" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Logout"><i class="fas fa-sign-out-alt"></i></a>
    <div id="bell-notification">
        <a class="text-light"  data-bs-toggle="modal" data-bs-target="#toner_stock_alert">
            <i class="fas fa-bell" data-tonerstockalert={{toner_stock_alert}} data-bs-toggle="tooltip" data-bs-placement="bottom" title="Toner Stock Alert" ></i>
        </a>
    </div>
     <!-- Modal -->
    <div class="modal fade" id="toner_stock_alert" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="toner_stock_alertLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="toner_stock_alertLabel" style="color:black;" >Toner Stock Alert</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="table table-bordered" id="myTable1">
                        <thead>
                        <tr class="chk-th">
                            <th>Printer Description</th>
                            <th>Toner Model</th>
                            <th>Remaining Quantity</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for toner in toner_under_fifteen|dictsortreversed:"toner_printer.description" %}
                        <tr>
                            <td>{{toner.toner_printer.description}} {{toner.toner_printer.model_no}}</td>
                            <td>{{toner.toner_model}}</td>
                            <td>{{toner.remaining_qty}}</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}


</div>
<div>

{% block content %}
{% endblock %}
</div>





</html>
