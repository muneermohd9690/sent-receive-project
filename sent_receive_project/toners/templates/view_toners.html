{% extends 'mainpage.html' %}

{% block content %}

<div class="container">
  <h2>Available Toners</h2>
  <input class="form-control" id="myInput" type="text" placeholder="Search..">
  <div class="table-responsive">
      <table class="table table-bordered">
          <thead>
          <tr>
              <th>Toner Description</th>
              <th>Model Number</th>
              <th>Quantity</th>
              <th>Action</th>

          </tr>
          </thead>
          <tbody id="myTable">
          {% for toner in toners %}
          <tr>
              <td>{{toner.toner_printer.description}} {{toner.toner_printer.model_no}}</td>
              <td>{{toner.toner_model}}</td>
              <td>{{toner.total_qty}}</td>
              <td><a href="{% url 'view_tonerdetails' toner.id %}" class="btn btn-info">Details</a>
                  <a href="{% url 'edit_toners_form' toner.id %}" class="btn btn-warning">Edit</a>
                  <a class="btn btn-danger" data-toggle="modal" data-target="#delete-modal{{ toner.pk }}">Delete</a></td>

          </tr>
          <!-- delete confirmation Modal -->
          <div class="modal fade" id="delete-modal{{ toner.pk }}" tabindex="-1" role="dialog" aria-labelledby="delete-modal-label"
               aria-hidden="true">
              <div class="modal-dialog" role="document">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="delete-modal-label">Delete Toner</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                          </button>
                      </div>
                      <div class="modal-body">
                          <div class="text-center text-danger">
                              <span>Do you want to delete toner ?</span>
                              <div class="text-dark mt-3 mb-2">Toner: <strong>{{toner.toner_model}}</strong></div>
                          </div>
                      </div>
                      <div class="modal-footer">
                          <a href="{% url 'view_toners' %}" class="btn btn-secondary">Cancel</a>
                          <a href="{% url 'edit_toners_delete' toner.id %}" class="btn btn-danger" type="submit" >Delete</a>
                      </div>
                  </div>
              </div>
          </div>
          <!-- delete confirmation Modal -->
          {% endfor %}
          </tbody>
      </table>
    </div>
<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>
</div>
<!--- Messages after CRUD operations --->
{% if messages %}
    {% for message in messages %}
            <script>
                 var m= "{{ message }}";
                 swal({
                       title: "Good job!",
                       text: m,
                       icon: "success",
                      });
            </script>
    {% endfor %}
{% endif %}
<!--- Messages after CRUD operations --->
{% endblock %}