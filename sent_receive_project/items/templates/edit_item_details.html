{% extends 'mainpage.html' %}
{% load static %}
{% block content %}

    <div class="container">
      <h2>Item Details</h2>
       <input type="hidden" name="itemdetails_id" value="{{itemdetails.id}}">
       <input class="form-control" id="search" type="text" placeholder="Search..">
              <div class="table-responsive">
                  <table class="table table-bordered" id="myTable">
                      <thead>
                          <tr>
                              <th>Model Number</th>
                              <th>Serial Number</th>
                              <th>Tag Number</th>
                              <th>Room Tag</th>
                              <th>Issued to</th>
                              <th>Employee Name</th>
                              <th>Employee Designation</th>
                              <th>Action</th>

                          </tr>
                      </thead>
                      <tbody >
                          {% for detail in itemdetails %}
                          <tr>
                              <td>{{detail.model_no.model_no}}</td>
                              <td>{{detail.serial_no}}</td>
                              <td>{{detail.tag_no}}</td>
                              <td>{{detail.room_tag}}</td>
                              <td>{{detail.issued_to.name}}</td>
                              <td>{{detail.employee_name}}</td>
                              <td>{{detail.employee_designation}}</td>
                              <td><!--<a href="{% url 'edit_item_details_form' detail.id %}" class="btn btn-warning"
                                         data-bs-toggle="tooltip" data-bs-placement="bottom" title="Edit"><i
                                              class="fas fa-edit"></i>
                                  </a>-->

                                  <button type="button" class="btn btn-warning" data-bs-toggle="modal"
                                     data-bs-target="#edit_item_details_form-modal{{ detail.pk }}" data-bs-toggle="tooltip"
                                     data-bs-placement="bottom" title="Edit"><i class="fas fa-edit"></i>
                                  </button>
                                  <div class="modal fade" id="edit_item_details_form-modal{{ detail.pk }}"
                                       data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                                       aria-labelledby="edit_item_details_form-modal-label{{ detail.pk }}" aria-hidden="true">
                                        {% include 'edit_item_details_modal.html' with detail=detail %}
                                  </div>

                              </td>
                          </tr>
                          <!-- Edit Modal -->


                          <!-- Edit Modal -->
                          {% endfor %}
                      </tbody>
                  </table>
              </div>
              <!-- The Modal -->
                <div class="modal" id="editItemDetailsModal">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="editItemDetailsModalLabel">Edit Item Details</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body" id="modalBody">
                        <!-- Modal content will be loaded here dynamically -->
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-success" id="saveChangesBtn">Save Changes</button>
                      </div>
                    </div>
                  </div>
                </div>
                <script>
      function openModal(detailId) {
        // Simulate fetching data from the server
        $.ajax({
          url: '{% url "edit_item_details_modal" %}',
          type: 'GET',
          data: { detail_id: detailId },
          success: function(response) {
            // Load dynamic content into the modal
            $('#editItemDetailsModalLabel').text('Edit Item Details - ' + detailId);
            $('#modalBody').html(response);

            // Show the modal
            $('#editItemDetailsModal').modal('show');
          },
          error: function(error) {
            console.error('Error fetching data:', error);
          }
        });
      }

      // Example of dynamically changing content based on another event
      $('#saveChangesBtn').click(function() {
        // Simulate updating data on the server
        // Update the content if needed
      });
    </script>


                <script>
                    window.onload = function() {
                        // Find all elements with the class 'bs-searchbox' containing an input element of type 'search'
                        var searchboxes = document.querySelectorAll('.bs-searchbox input[type="search"]');

                        // Iterate through the NodeList and set unique IDs
                        searchboxes.forEach(function(searchInput, index) {
                            var uniqueId = 'search_input_' + index;  // You can modify this based on your requirements
                            searchInput.id = uniqueId;
                            <!---->console.log('Set ID for element:', uniqueId);
                        });

                        // Your code here
                    };
                </script>
    </div>

{% endblock %}